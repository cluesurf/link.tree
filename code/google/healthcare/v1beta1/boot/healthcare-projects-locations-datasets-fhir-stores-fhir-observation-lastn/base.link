
load @drumwork/snow/base/native-string
  take form native-string

load @drumwork/snow/googleapis.com/healthcare/v1beta1/base/http-body
  take form http-body

boot healthcare-projects-locations-datasets-fhir-stores-fhir-observation-lastn, name <healthcare.projects.locations.datasets.fhirStores.fhir.Observation-lastn>
  deed get
  note <Retrieves the N most recent `Observation` resources for a subject matching search criteria specified as query parameters, grouped by `Observation.code`, sorted from most recent to oldest. Implements the FHIR extended operation Observation-lastn ([STU3](https://hl7.org/implement/standards/fhir/STU3/observation-operations.html#lastn), [R4](https://hl7.org/implement/standards/fhir/R4/observation-operations.html#lastn)). DSTU2 doesn't define the Observation-lastn method, but the server supports it the same way it supports STU3. Search terms are provided as query parameters following the same pattern as the search method. The following search parameters must be provided: - `subject` or `patient` to specify a subject for the Observation. - `code`, `category` or any of the composite parameters that include `code`. Any other valid Observation search parameters can also be provided. This operation accepts an additional query parameter `max`, which specifies N, the maximum number of Observations to return from each group, with a default of 1. Searches with over 1000 results are rejected. Results are counted before grouping and limiting the results with `max`. To stay within the limit, constrain these searches using Observation search parameters such as `_lastUpdated` or `date`. On success, the response body contains a JSON-encoded representation of a `Bundle` resource of type `searchset`, containing the results of the operation. Errors generated by the FHIR store contain a JSON-encoded `OperationOutcome` resource describing the reason for the error. If the request cannot be mapped to a valid API method on a FHIR store, a generic GCP error might be returned instead.>

  take parent
    like native-string
    note <Name of the FHIR store to retrieve resources from.>

  line </v1beta1/{parent}/fhir/Observation/$lastn>

  loot 200
    seed json, like http-body
    note <Successful response>